# Mutation Tool

Controller for the mutation creation and evaluation workflow 

---

## LiDAR Test Generation

- genLidarTests.py
    - Main Runner for tool contains args
- mutationRunner.py
    - Contains the main loop for mutation generation
- redoMutation.py
    - Alternative to recreate mutations


### Arguments
 

#### Required Path Args (All Absolute)
| Argument | Usage |
| ----- | ------------ |
| ```-binPath PATH``` | Path to the scan bin files, expected to be given in the format of /path/dataset/sequences |
| ```-labelPath PATH``` | Path to the label files, expected to be given in the format of /path/dataset/sequences |
| ```-predPath PATH``` | Path to the models original prediction files, expect that following the directory given are the model directories each with the seq and scenes predictions |
| ```-modelDir PATH``` | Path to the base directory where the models are stored |
| ```-mdb PATH``` | Path to the mongoconnect.txt file with the connection url string |
| ```-saveAt PATH``` | Path to the location to save the output from the tool |

#### Tool Args
| Argument | Usage |
| ----- | ------------ |
| ```-models "model,model"``` | Comma seperated list of model abbreviations ie "cyl,spv,sal" |
| ```-mutation "mutation"``` | Comma seperated list of model abbreviations ie "ADD_ROTATE" |
| ```-count #``` | Total test cases generated by the tool |
| ```-batch #``` | Count before a batch is run |
| ```-saveNum #``` | The top failures per model to save |

#### Optional Args
| Argument | Usage |
| ----- | ------------ |
| ```-saveAll``` | Overrides saveNum to save all the mutations generated |
| ```-vis``` | Argument to visualize the mutation |
| ```-redoBatchId ID``` | Triggers the redo mutation batch with the provided ID, does not run the tool like normal |
| ```-redoMutation ID``` | Triggers the redo mutation with the provided ID, does not run the tool like normal |

#### Optional Mutation Selection Args
| Argument | Usage |
| ----- | ------------ |
| ```-assetId ID``` | Backdoor to preselect the asset used for mutation |
| ```-sequence ##``` | Backdoor to preselect the sequence for the ADD mutation (requires scene) |
| ```-scene ######``` | Backdoor to preselect the scene for the ADD mutation (requires sequence) |
| ```-rotate #``` | Backdoor to preselect the ADD rotation |
| ```-mirror #``` | Backdoor to preselect the axis to mirror over |
| ```-intensity #``` | Backdoor to preselect the intensity to change |
| ```-scale #``` | Backdoor to preselect the amount to scale by |
| ```-sign #``` | Backdoor to preselect the sign to replace with |
| ```-deformPercent #``` | Backdoor to preselect the percent of the asset to deform |
| ```-deformPoint #``` | Backdoor to preselect the point to deform from |
| ```-deformMu #``` | Backdoor to preselect the deform mu |
| ```-deformSigma #``` | Backdoor to preselect the deform sigma |
| ```-deformSeed #``` | Backdoor to preselect the deformation noise seed |

---
